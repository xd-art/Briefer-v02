{"ast":null,"code":"/**\r\n * Tries to repair a truncated JSON string by closing open brackets and braces.\r\n * @param {string} jsonString - The potentially truncated JSON string.\r\n * @return {string} - The repaired JSON string.\r\n */export function jsonRepair(jsonString){let repaired=jsonString.trim();// Basic cleanup: remove trailing commas before closing brackets\n// This is a simple heuristic and might not catch all cases\nconst stack=[];let inString=false;let isEscaped=false;for(let i=0;i<repaired.length;i++){const char=repaired[i];if(isEscaped){isEscaped=false;continue;}if(char==='\\\\'){isEscaped=true;continue;}if(char==='\"'){inString=!inString;continue;}if(!inString){if(char==='{'||char==='['){stack.push(char);}else if(char==='}'){if(stack.length>0&&stack[stack.length-1]==='{'){stack.pop();}}else if(char===']'){if(stack.length>0&&stack[stack.length-1]==='['){stack.pop();}}}}// If we are still in a string, close it\nif(inString){repaired+='\"';}// Close remaining open structures in reverse order\nwhile(stack.length>0){const open=stack.pop();if(open==='{'){repaired+='}';}else if(open==='['){repaired+=']';}}return repaired;}","map":{"version":3,"names":["jsonRepair","jsonString","repaired","trim","stack","inString","isEscaped","i","length","char","push","pop","open"],"sources":["D:/SRC/XAMPP/htdocs/sites/Briefer-v02/src/utils/jsonRepair.js"],"sourcesContent":["/**\r\n * Tries to repair a truncated JSON string by closing open brackets and braces.\r\n * @param {string} jsonString - The potentially truncated JSON string.\r\n * @return {string} - The repaired JSON string.\r\n */\r\nexport function jsonRepair(jsonString) {\r\n    let repaired = jsonString.trim();\r\n\r\n    // Basic cleanup: remove trailing commas before closing brackets\r\n    // This is a simple heuristic and might not catch all cases\r\n\r\n    const stack = [];\r\n    let inString = false;\r\n    let isEscaped = false;\r\n\r\n    for (let i = 0; i < repaired.length; i++) {\r\n        const char = repaired[i];\r\n\r\n        if (isEscaped) {\r\n            isEscaped = false;\r\n            continue;\r\n        }\r\n\r\n        if (char === '\\\\') {\r\n            isEscaped = true;\r\n            continue;\r\n        }\r\n\r\n        if (char === '\"') {\r\n            inString = !inString;\r\n            continue;\r\n        }\r\n\r\n        if (!inString) {\r\n            if (char === '{' || char === '[') {\r\n                stack.push(char);\r\n            } else if (char === '}') {\r\n                if (stack.length > 0 && stack[stack.length - 1] === '{') {\r\n                    stack.pop();\r\n                }\r\n            } else if (char === ']') {\r\n                if (stack.length > 0 && stack[stack.length - 1] === '[') {\r\n                    stack.pop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // If we are still in a string, close it\r\n    if (inString) {\r\n        repaired += '\"';\r\n    }\r\n\r\n    // Close remaining open structures in reverse order\r\n    while (stack.length > 0) {\r\n        const open = stack.pop();\r\n        if (open === '{') {\r\n            repaired += '}';\r\n        } else if (open === '[') {\r\n            repaired += ']';\r\n        }\r\n    }\r\n\r\n    return repaired;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAA,UAAUA,CAACC,UAAU,CAAE,CACnC,GAAI,CAAAC,QAAQ,CAAGD,UAAU,CAACE,IAAI,CAAC,CAAC,CAEhC;AACA;AAEA,KAAM,CAAAC,KAAK,CAAG,EAAE,CAChB,GAAI,CAAAC,QAAQ,CAAG,KAAK,CACpB,GAAI,CAAAC,SAAS,CAAG,KAAK,CAErB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGL,QAAQ,CAACM,MAAM,CAAED,CAAC,EAAE,CAAE,CACtC,KAAM,CAAAE,IAAI,CAAGP,QAAQ,CAACK,CAAC,CAAC,CAExB,GAAID,SAAS,CAAE,CACXA,SAAS,CAAG,KAAK,CACjB,SACJ,CAEA,GAAIG,IAAI,GAAK,IAAI,CAAE,CACfH,SAAS,CAAG,IAAI,CAChB,SACJ,CAEA,GAAIG,IAAI,GAAK,GAAG,CAAE,CACdJ,QAAQ,CAAG,CAACA,QAAQ,CACpB,SACJ,CAEA,GAAI,CAACA,QAAQ,CAAE,CACX,GAAII,IAAI,GAAK,GAAG,EAAIA,IAAI,GAAK,GAAG,CAAE,CAC9BL,KAAK,CAACM,IAAI,CAACD,IAAI,CAAC,CACpB,CAAC,IAAM,IAAIA,IAAI,GAAK,GAAG,CAAE,CACrB,GAAIL,KAAK,CAACI,MAAM,CAAG,CAAC,EAAIJ,KAAK,CAACA,KAAK,CAACI,MAAM,CAAG,CAAC,CAAC,GAAK,GAAG,CAAE,CACrDJ,KAAK,CAACO,GAAG,CAAC,CAAC,CACf,CACJ,CAAC,IAAM,IAAIF,IAAI,GAAK,GAAG,CAAE,CACrB,GAAIL,KAAK,CAACI,MAAM,CAAG,CAAC,EAAIJ,KAAK,CAACA,KAAK,CAACI,MAAM,CAAG,CAAC,CAAC,GAAK,GAAG,CAAE,CACrDJ,KAAK,CAACO,GAAG,CAAC,CAAC,CACf,CACJ,CACJ,CACJ,CAEA;AACA,GAAIN,QAAQ,CAAE,CACVH,QAAQ,EAAI,GAAG,CACnB,CAEA;AACA,MAAOE,KAAK,CAACI,MAAM,CAAG,CAAC,CAAE,CACrB,KAAM,CAAAI,IAAI,CAAGR,KAAK,CAACO,GAAG,CAAC,CAAC,CACxB,GAAIC,IAAI,GAAK,GAAG,CAAE,CACdV,QAAQ,EAAI,GAAG,CACnB,CAAC,IAAM,IAAIU,IAAI,GAAK,GAAG,CAAE,CACrBV,QAAQ,EAAI,GAAG,CACnB,CACJ,CAEA,MAAO,CAAAA,QAAQ,CACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}