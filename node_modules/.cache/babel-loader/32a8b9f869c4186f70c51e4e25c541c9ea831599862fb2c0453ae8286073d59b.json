{"ast":null,"code":"import React from'react';import DOMPurify from'dompurify';// Configure DOMPurify to allow Quill.js specific attributes and classes\nimport{jsx as _jsx}from\"react/jsx-runtime\";const configureDOMPurify=()=>{// Allow Quill.js specific classes and attributes\nDOMPurify.addHook('uponSanitizeElement',(node,data)=>{if(data.tagName==='div'&&node.classList.contains('ql-editor')){node.classList.add('ql-editor');}});};// Run configuration once\nconfigureDOMPurify();const RichTextDisplay=_ref=>{let{content}=_ref;// Sanitize the HTML content to prevent XSS attacks\n// Allow custom <ai-link> tag and its attributes\nconst sanitizedContent=DOMPurify.sanitize(content,{ALLOWED_TAGS:['h2','h3','h4','h5','h6','p','br','span','strong','b','em','i','u','s','ul','ol','li','a','img','blockquote','code','pre','div','ai-link'],ALLOWED_ATTR:['class','id','href','src','alt','title','style','data-','contenteditable','topic','template'],// Allow data attributes and other needed options\nALLOW_DATA_ATTR:true,ADD_TAGS:['iframe'],ADD_ATTR:['allow','allowfullscreen','frameborder','scrolling']});return/*#__PURE__*/_jsx(\"div\",{className:\"rich-text-content quill-content\",dangerouslySetInnerHTML:{__html:sanitizedContent},\"data-testid\":\"rich-text-content\"});};export default RichTextDisplay;","map":{"version":3,"names":["React","DOMPurify","jsx","_jsx","configureDOMPurify","addHook","node","data","tagName","classList","contains","add","RichTextDisplay","_ref","content","sanitizedContent","sanitize","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_DATA_ATTR","ADD_TAGS","ADD_ATTR","className","dangerouslySetInnerHTML","__html"],"sources":["D:/SRC/XAMPP/htdocs/sites/Briefer-v02/src/components/RichTextDisplay.js"],"sourcesContent":["import React from 'react';\r\nimport DOMPurify from 'dompurify';\r\n\r\n// Configure DOMPurify to allow Quill.js specific attributes and classes\r\nconst configureDOMPurify = () => {\r\n  // Allow Quill.js specific classes and attributes\r\n  DOMPurify.addHook('uponSanitizeElement', (node, data) => {\r\n    if (data.tagName === 'div' && node.classList.contains('ql-editor')) {\r\n      node.classList.add('ql-editor');\r\n    }\r\n  });\r\n};\r\n\r\n// Run configuration once\r\nconfigureDOMPurify();\r\n\r\nconst RichTextDisplay = ({ content }) => {\r\n  // Sanitize the HTML content to prevent XSS attacks\r\n  // Allow custom <ai-link> tag and its attributes\r\n  const sanitizedContent = DOMPurify.sanitize(content, {\r\n    ALLOWED_TAGS: [\r\n      'h2', 'h3', 'h4', 'h5', 'h6',\r\n      'p', 'br', 'span',\r\n      'strong', 'b', 'em', 'i', 'u', 's',\r\n      'ul', 'ol', 'li',\r\n      'a', 'img',\r\n      'blockquote', 'code', 'pre',\r\n      'div',\r\n      'ai-link'\r\n    ],\r\n    ALLOWED_ATTR: [\r\n      'class', 'id', 'href', 'src', 'alt', 'title',\r\n      'style', 'data-', 'contenteditable',\r\n      'topic', 'template'\r\n    ],\r\n    // Allow data attributes and other needed options\r\n    ALLOW_DATA_ATTR: true,\r\n    ADD_TAGS: ['iframe'],\r\n    ADD_ATTR: ['allow', 'allowfullscreen', 'frameborder', 'scrolling']\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className=\"rich-text-content quill-content\"\r\n      dangerouslySetInnerHTML={{ __html: sanitizedContent }}\r\n      data-testid=\"rich-text-content\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default RichTextDisplay;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,SAAS,KAAM,WAAW,CAEjC;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B;AACAH,SAAS,CAACI,OAAO,CAAC,qBAAqB,CAAE,CAACC,IAAI,CAAEC,IAAI,GAAK,CACvD,GAAIA,IAAI,CAACC,OAAO,GAAK,KAAK,EAAIF,IAAI,CAACG,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,CAAE,CAClEJ,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,WAAW,CAAC,CACjC,CACF,CAAC,CAAC,CACJ,CAAC,CAED;AACAP,kBAAkB,CAAC,CAAC,CAEpB,KAAM,CAAAQ,eAAe,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAClC;AACA;AACA,KAAM,CAAAE,gBAAgB,CAAGd,SAAS,CAACe,QAAQ,CAACF,OAAO,CAAE,CACnDG,YAAY,CAAE,CACZ,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAC5B,GAAG,CAAE,IAAI,CAAE,MAAM,CACjB,QAAQ,CAAE,GAAG,CAAE,IAAI,CAAE,GAAG,CAAE,GAAG,CAAE,GAAG,CAClC,IAAI,CAAE,IAAI,CAAE,IAAI,CAChB,GAAG,CAAE,KAAK,CACV,YAAY,CAAE,MAAM,CAAE,KAAK,CAC3B,KAAK,CACL,SAAS,CACV,CACDC,YAAY,CAAE,CACZ,OAAO,CAAE,IAAI,CAAE,MAAM,CAAE,KAAK,CAAE,KAAK,CAAE,OAAO,CAC5C,OAAO,CAAE,OAAO,CAAE,iBAAiB,CACnC,OAAO,CAAE,UAAU,CACpB,CACD;AACAC,eAAe,CAAE,IAAI,CACrBC,QAAQ,CAAE,CAAC,QAAQ,CAAC,CACpBC,QAAQ,CAAE,CAAC,OAAO,CAAE,iBAAiB,CAAE,aAAa,CAAE,WAAW,CACnE,CAAC,CAAC,CAEF,mBACElB,IAAA,QACEmB,SAAS,CAAC,iCAAiC,CAC3CC,uBAAuB,CAAE,CAAEC,MAAM,CAAET,gBAAiB,CAAE,CACtD,cAAY,mBAAmB,CAChC,CAAC,CAEN,CAAC,CAED,cAAe,CAAAH,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}