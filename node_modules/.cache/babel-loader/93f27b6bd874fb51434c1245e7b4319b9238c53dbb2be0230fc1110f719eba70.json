{"ast":null,"code":"// API service for Perplexity AI integration\nconst API_ENDPOINT='https://api.perplexity.ai/chat/completions';const API_KEY='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';export const callPerplexityAPI=async payload=>{const{sectionTitle,articleTitle,currentContent,userPrompt}=payload;const systemPrompt=\"You are an article editor for project management content for digital projects.\\n\\nYOU CAN:\\n- Improve clarity of formulations\\n- Add structure (lists, headings)\\n- Add checklists and stages\\n\\nYOU CANNOT:\\n- Add unconfirmed facts\\n- Advertise tools without marking\\n- Contradict original meaning\\n\\nIf prompt violates rules, respond: \\\"ERROR: [reason]. Please reformulate your request for clarity/structure improvement.\\\"\\n\\nCurrent title: \\\"\".concat(sectionTitle,\"\\\"\\nArticle title: \\\"\").concat(articleTitle,\"\\\"\\nCurrent content: \\\"\").concat(currentContent,\"\\\"\\n\\nUser requests: \").concat(userPrompt,\"\\n\\nReturn improved content in JSON format:\\n{\\n  \\\"title\\\": \\\"improved title\\\",\\n  \\\"content\\\": \\\"improved content\\\"\\n}\");try{const response=await fetch(API_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(API_KEY)},body:JSON.stringify({model:'sonar-pro',messages:[{role:'user',content:systemPrompt}],temperature:0.7,max_tokens:1000})});if(!response.ok){throw new Error(\"API request failed: \".concat(response.status));}const data=await response.json();return data.choices[0].message.content;}catch(error){console.error('AI API Error:',error);throw error;}};","map":{"version":3,"names":["API_ENDPOINT","API_KEY","callPerplexityAPI","payload","sectionTitle","articleTitle","currentContent","userPrompt","systemPrompt","concat","response","fetch","method","headers","body","JSON","stringify","model","messages","role","content","temperature","max_tokens","ok","Error","status","data","json","choices","message","error","console"],"sources":["D:/SRC/XAMPP/htdocs/sites/UI/article-page-v05/src/api/perplexity.js"],"sourcesContent":["// API service for Perplexity AI integration\r\nconst API_ENDPOINT = 'https://api.perplexity.ai/chat/completions';\r\nconst API_KEY = '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';\r\n\r\nexport const callPerplexityAPI = async (payload) => {\r\n  const { sectionTitle, articleTitle, currentContent, userPrompt } = payload;\r\n\r\n  const systemPrompt = `You are an article editor for project management content for digital projects.\r\n\r\nYOU CAN:\r\n- Improve clarity of formulations\r\n- Add structure (lists, headings)\r\n- Add checklists and stages\r\n\r\nYOU CANNOT:\r\n- Add unconfirmed facts\r\n- Advertise tools without marking\r\n- Contradict original meaning\r\n\r\nIf prompt violates rules, respond: \"ERROR: [reason]. Please reformulate your request for clarity/structure improvement.\"\r\n\r\nCurrent title: \"${sectionTitle}\"\r\nArticle title: \"${articleTitle}\"\r\nCurrent content: \"${currentContent}\"\r\n\r\nUser requests: ${userPrompt}\r\n\r\nReturn improved content in JSON format:\r\n{\r\n  \"title\": \"improved title\",\r\n  \"content\": \"improved content\"\r\n}`;\r\n\r\n  try {\r\n    const response = await fetch(API_ENDPOINT, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${API_KEY}`\r\n      },\r\n      body: JSON.stringify({\r\n        model: 'sonar-pro',\r\n        messages: [\r\n          { role: 'user', content: systemPrompt }\r\n        ],\r\n        temperature: 0.7,\r\n        max_tokens: 1000\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API request failed: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.choices[0].message.content;\r\n  } catch (error) {\r\n    console.error('AI API Error:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"AAAA;AACA,KAAM,CAAAA,YAAY,CAAG,4CAA4C,CACjE,KAAM,CAAAC,OAAO,CAAG,uDAAuD,CAEvE,MAAO,MAAM,CAAAC,iBAAiB,CAAG,KAAO,CAAAC,OAAO,EAAK,CAClD,KAAM,CAAEC,YAAY,CAAEC,YAAY,CAAEC,cAAc,CAAEC,UAAW,CAAC,CAAGJ,OAAO,CAE1E,KAAM,CAAAK,YAAY,8bAAAC,MAAA,CAcFL,YAAY,0BAAAK,MAAA,CACZJ,YAAY,4BAAAI,MAAA,CACVH,cAAc,0BAAAG,MAAA,CAEjBF,UAAU,4HAMzB,CAEA,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACX,YAAY,CAAE,CACzCY,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAJ,MAAA,CAAYR,OAAO,CACpC,CAAC,CACDa,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,KAAK,CAAE,WAAW,CAClBC,QAAQ,CAAE,CACR,CAAEC,IAAI,CAAE,MAAM,CAAEC,OAAO,CAAEZ,YAAa,CAAC,CACxC,CACDa,WAAW,CAAE,GAAG,CAChBC,UAAU,CAAE,IACd,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACZ,QAAQ,CAACa,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAf,MAAA,CAAwBC,QAAQ,CAACe,MAAM,CAAE,CAAC,CAC3D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAhB,QAAQ,CAACiB,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAD,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAACT,OAAO,CACxC,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrC,KAAM,CAAAA,KAAK,CACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}