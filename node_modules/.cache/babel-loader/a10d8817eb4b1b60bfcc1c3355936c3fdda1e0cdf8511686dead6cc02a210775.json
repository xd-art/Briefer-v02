{"ast":null,"code":"var _jsxFileName = \"D:\\\\SRC\\\\XAMPP\\\\htdocs\\\\sites\\\\UI\\\\article-page-v07\\\\src\\\\components\\\\CardEditorModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport ReactQuill from 'react-quill';\nimport DOMPurify from 'dompurify';\nimport './CardEditorModal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CardEditorModal = ({\n  card,\n  isNewCard,\n  onSave,\n  onClose\n}) => {\n  _s();\n  const [title, setTitle] = useState((card === null || card === void 0 ? void 0 : card.title) || '');\n  const [content, setContent] = useState((card === null || card === void 0 ? void 0 : card.content) || '');\n  const [delta, setDelta] = useState((card === null || card === void 0 ? void 0 : card.delta) || null);\n  const [aiPrompt, setAiPrompt] = useState('');\n  const [isAiProcessing, setIsAiProcessing] = useState(false);\n  const quillRef = useRef(null);\n\n  // Quill modules configuration\n  const modules = {\n    toolbar: [[{\n      'header': [1, 2, 3, false]\n    }], ['bold', 'italic', 'underline', 'strike'], [{\n      'list': 'ordered'\n    }, {\n      'list': 'bullet'\n    }], ['blockquote', 'code-block'], ['link'], ['clean']]\n  };\n  const formats = ['header', 'bold', 'italic', 'underline', 'strike', 'list', 'bullet', 'blockquote', 'code-block', 'link'];\n\n  // Initialize Quill with existing content\n  useEffect(() => {\n    if (quillRef.current && card) {\n      const quill = quillRef.current.getEditor();\n\n      // If we have a delta, use it directly\n      if (card.delta) {\n        quill.setContents(card.delta);\n      }\n      // Otherwise convert HTML to Delta\n      else if (card.content) {\n        quill.clipboard.dangerouslyPasteHTML(card.content);\n      }\n    }\n  }, [card]);\n  const handleSave = () => {\n    if (!title.trim() && !content.trim()) {\n      alert('Please enter a title or content for the card.');\n      return;\n    }\n\n    // Get content as Delta and HTML\n    const quill = quillRef.current.getEditor();\n    const deltaContent = quill.getContents();\n    const htmlContent = quill.root.innerHTML;\n\n    // Sanitize HTML content\n    const sanitizedContent = DOMPurify.sanitize(htmlContent, {\n      ALLOWED_TAGS: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'br', 'strong', 'em', 'u', 'ol', 'ul', 'li', 'blockquote', 'a'],\n      ALLOWED_ATTR: ['href', 'target']\n    });\n    const updatedCard = {\n      ...card,\n      title: title.trim(),\n      content: sanitizedContent,\n      delta: deltaContent\n    };\n    onSave(updatedCard);\n  };\n  const handleAiPromptSubmit = async () => {\n    if (!aiPrompt.trim()) {\n      alert('Please enter a prompt for AI assistance.');\n      return;\n    }\n    if (aiPrompt.length < 10) {\n      alert('Prompt too short. Minimum 10 characters required.');\n      return;\n    }\n    if (aiPrompt.length > 500) {\n      alert('Prompt too long. Maximum 500 characters allowed.');\n      return;\n    }\n    setIsAiProcessing(true);\n    try {\n      // Get current content for context\n      const quill = quillRef.current.getEditor();\n      const currentContent = quill.getText();\n\n      // Call Perplexity API\n      const aiResponse = await callPerplexityAPI(aiPrompt, title, currentContent);\n      handleAiResponse(aiResponse);\n    } catch (error) {\n      console.error('AI API Error:', error);\n      alert('AI service temporarily unavailable. Please try again later.');\n    } finally {\n      setIsAiProcessing(false);\n      setAiPrompt('');\n    }\n  };\n  const callPerplexityAPI = async (prompt, currentTitle, currentContent) => {\n    const systemPrompt = `You are an article editor for project management content for digital projects.\n\nYOU CAN:\n- Improve clarity of formulations\n- Add structure (lists, headings)\n- Add checklists and stages\n\nYOU CANNOT:\n- Add unconfirmed facts\n- Advertise tools without marking\n- Contradict original meaning\n\nIf prompt violates rules, respond: \"ERROR: [reason]. Please reformulate your request for clarity/structure improvement.\"\n\nCurrent title: \"${currentTitle}\"\nCurrent content: \"${currentContent}\"\n\nUser requests: ${prompt}\n\nReturn improved content in JSON format:\n{\n  \"title\": \"improved title\",\n  \"content\": \"improved content\"\n}`;\n    const response = await fetch('https://api.perplexity.ai/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer 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'\n      },\n      body: JSON.stringify({\n        model: 'sonar-pro',\n        messages: [{\n          role: 'user',\n          content: systemPrompt\n        }],\n        temperature: 0.7,\n        max_tokens: 1000\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`API request failed: ${response.status}`);\n    }\n    const data = await response.json();\n    return data.choices[0].message.content;\n  };\n  const handleAiResponse = aiResponse => {\n    try {\n      // Check if response is an error\n      if (aiResponse.startsWith('ERROR:')) {\n        alert(aiResponse);\n        return;\n      }\n\n      // Try to parse JSON response\n      let parsedResponse;\n      try {\n        // Extract JSON from response if it's wrapped in quotes or other text\n        const jsonMatch = aiResponse.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          parsedResponse = JSON.parse(jsonMatch[0]);\n        } else {\n          throw new Error('No JSON found in response');\n        }\n      } catch (e) {\n        // If not JSON, treat as plain text improvement\n        parsedResponse = {\n          title: title,\n          content: aiResponse\n        };\n      }\n\n      // Update the form fields with AI suggestions\n      if (parsedResponse.title) {\n        setTitle(parsedResponse.title);\n      }\n      if (parsedResponse.content) {\n        const quill = quillRef.current.getEditor();\n        quill.clipboard.dangerouslyPasteHTML(parsedResponse.content);\n      }\n      alert('AI improvements applied! Review and save changes.');\n    } catch (error) {\n      console.error('Error handling AI response:', error);\n      alert('Error processing AI response. Please try again.');\n    }\n  };\n  const handleContentChange = (content, delta, source, editor) => {\n    setContent(content);\n    setDelta(editor.getContents());\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Escape') {\n      onClose();\n    } else if (e.ctrlKey && e.key === 'Enter') {\n      handleSave();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal show\",\n    onKeyDown: handleKeyDown,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: isNewCard ? 'Add New Card' : 'Edit Card'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-btn\",\n          onClick: onClose,\n          \"aria-label\": \"Close\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"20\",\n            height: \"20\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M18 6L6 18\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M6 6L18 18\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editor-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"card-title-input\",\n            placeholder: \"Enter section title\",\n            value: title,\n            onChange: e => setTitle(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n            ref: quillRef,\n            theme: \"snow\",\n            value: content,\n            onChange: handleContentChange,\n            modules: modules,\n            formats: formats,\n            className: \"card-editor\",\n            placeholder: \"Enter your content here...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ai-prompt-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prompt-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"ai-prompt-input\",\n              placeholder: \"Write prompt for AI assistance...\",\n              value: aiPrompt,\n              onChange: e => setAiPrompt(e.target.value),\n              rows: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ai-submit-btn\",\n              onClick: handleAiPromptSubmit,\n              disabled: isAiProcessing,\n              \"aria-label\": \"Send to AI\",\n              children: isAiProcessing ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 19L19 12M19 12L12 5M19 12H5\",\n                  stroke: \"white\",\n                  strokeWidth: \"2\",\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: onClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleSave,\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 5\n  }, this);\n};\n_s(CardEditorModal, \"VJulc06/hkujAtgLCGj+ksNrqMw=\");\n_c = CardEditorModal;\nexport default CardEditorModal;\nvar _c;\n$RefreshReg$(_c, \"CardEditorModal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ReactQuill","DOMPurify","jsxDEV","_jsxDEV","CardEditorModal","card","isNewCard","onSave","onClose","_s","title","setTitle","content","setContent","delta","setDelta","aiPrompt","setAiPrompt","isAiProcessing","setIsAiProcessing","quillRef","modules","toolbar","formats","current","quill","getEditor","setContents","clipboard","dangerouslyPasteHTML","handleSave","trim","alert","deltaContent","getContents","htmlContent","root","innerHTML","sanitizedContent","sanitize","ALLOWED_TAGS","ALLOWED_ATTR","updatedCard","handleAiPromptSubmit","length","currentContent","getText","aiResponse","callPerplexityAPI","handleAiResponse","error","console","prompt","currentTitle","systemPrompt","response","fetch","method","headers","body","JSON","stringify","model","messages","role","temperature","max_tokens","ok","Error","status","data","json","choices","message","startsWith","parsedResponse","jsonMatch","match","parse","e","handleContentChange","source","editor","handleKeyDown","key","ctrlKey","className","onKeyDown","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","type","placeholder","value","onChange","target","ref","theme","rows","disabled","_c","$RefreshReg$"],"sources":["D:/SRC/XAMPP/htdocs/sites/UI/article-page-v07/src/components/CardEditorModal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport ReactQuill from 'react-quill';\r\nimport DOMPurify from 'dompurify';\r\nimport './CardEditorModal.css';\r\n\r\nconst CardEditorModal = ({ card, isNewCard, onSave, onClose }) => {\r\n  const [title, setTitle] = useState(card?.title || '');\r\n  const [content, setContent] = useState(card?.content || '');\r\n  const [delta, setDelta] = useState(card?.delta || null);\r\n  const [aiPrompt, setAiPrompt] = useState('');\r\n  const [isAiProcessing, setIsAiProcessing] = useState(false);\r\n  const quillRef = useRef(null);\r\n\r\n  // Quill modules configuration\r\n  const modules = {\r\n    toolbar: [\r\n      [{ 'header': [1, 2, 3, false] }],\r\n      ['bold', 'italic', 'underline', 'strike'],\r\n      [{ 'list': 'ordered'}, { 'list': 'bullet' }],\r\n      ['blockquote', 'code-block'],\r\n      ['link'],\r\n      ['clean']\r\n    ],\r\n  };\r\n\r\n  const formats = [\r\n    'header',\r\n    'bold', 'italic', 'underline', 'strike',\r\n    'list', 'bullet',\r\n    'blockquote', 'code-block',\r\n    'link'\r\n  ];\r\n\r\n  // Initialize Quill with existing content\r\n  useEffect(() => {\r\n    if (quillRef.current && card) {\r\n      const quill = quillRef.current.getEditor();\r\n      \r\n      // If we have a delta, use it directly\r\n      if (card.delta) {\r\n        quill.setContents(card.delta);\r\n      } \r\n      // Otherwise convert HTML to Delta\r\n      else if (card.content) {\r\n        quill.clipboard.dangerouslyPasteHTML(card.content);\r\n      }\r\n    }\r\n  }, [card]);\r\n\r\n  const handleSave = () => {\r\n    if (!title.trim() && !content.trim()) {\r\n      alert('Please enter a title or content for the card.');\r\n      return;\r\n    }\r\n\r\n    // Get content as Delta and HTML\r\n    const quill = quillRef.current.getEditor();\r\n    const deltaContent = quill.getContents();\r\n    const htmlContent = quill.root.innerHTML;\r\n\r\n    // Sanitize HTML content\r\n    const sanitizedContent = DOMPurify.sanitize(htmlContent, {\r\n      ALLOWED_TAGS: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'br', 'strong', 'em', 'u', 'ol', 'ul', 'li', 'blockquote', 'a'],\r\n      ALLOWED_ATTR: ['href', 'target']\r\n    });\r\n\r\n    const updatedCard = {\r\n      ...card,\r\n      title: title.trim(),\r\n      content: sanitizedContent,\r\n      delta: deltaContent\r\n    };\r\n\r\n    onSave(updatedCard);\r\n  };\r\n\r\n  const handleAiPromptSubmit = async () => {\r\n    if (!aiPrompt.trim()) {\r\n      alert('Please enter a prompt for AI assistance.');\r\n      return;\r\n    }\r\n\r\n    if (aiPrompt.length < 10) {\r\n      alert('Prompt too short. Minimum 10 characters required.');\r\n      return;\r\n    }\r\n\r\n    if (aiPrompt.length > 500) {\r\n      alert('Prompt too long. Maximum 500 characters allowed.');\r\n      return;\r\n    }\r\n\r\n    setIsAiProcessing(true);\r\n\r\n    try {\r\n      // Get current content for context\r\n      const quill = quillRef.current.getEditor();\r\n      const currentContent = quill.getText();\r\n\r\n      // Call Perplexity API\r\n      const aiResponse = await callPerplexityAPI(aiPrompt, title, currentContent);\r\n      handleAiResponse(aiResponse);\r\n    } catch (error) {\r\n      console.error('AI API Error:', error);\r\n      alert('AI service temporarily unavailable. Please try again later.');\r\n    } finally {\r\n      setIsAiProcessing(false);\r\n      setAiPrompt('');\r\n    }\r\n  };\r\n\r\n  const callPerplexityAPI = async (prompt, currentTitle, currentContent) => {\r\n    const systemPrompt = `You are an article editor for project management content for digital projects.\r\n\r\nYOU CAN:\r\n- Improve clarity of formulations\r\n- Add structure (lists, headings)\r\n- Add checklists and stages\r\n\r\nYOU CANNOT:\r\n- Add unconfirmed facts\r\n- Advertise tools without marking\r\n- Contradict original meaning\r\n\r\nIf prompt violates rules, respond: \"ERROR: [reason]. Please reformulate your request for clarity/structure improvement.\"\r\n\r\nCurrent title: \"${currentTitle}\"\r\nCurrent content: \"${currentContent}\"\r\n\r\nUser requests: ${prompt}\r\n\r\nReturn improved content in JSON format:\r\n{\r\n  \"title\": \"improved title\",\r\n  \"content\": \"improved content\"\r\n}`;\r\n\r\n    const response = await fetch('https://api.perplexity.ai/chat/completions', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer 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'\r\n      },\r\n      body: JSON.stringify({\r\n        model: 'sonar-pro',\r\n        messages: [\r\n          { role: 'user', content: systemPrompt }\r\n        ],\r\n        temperature: 0.7,\r\n        max_tokens: 1000\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API request failed: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.choices[0].message.content;\r\n  };\r\n\r\n  const handleAiResponse = (aiResponse) => {\r\n    try {\r\n      // Check if response is an error\r\n      if (aiResponse.startsWith('ERROR:')) {\r\n        alert(aiResponse);\r\n        return;\r\n      }\r\n\r\n      // Try to parse JSON response\r\n      let parsedResponse;\r\n      try {\r\n        // Extract JSON from response if it's wrapped in quotes or other text\r\n        const jsonMatch = aiResponse.match(/\\{[\\s\\S]*\\}/);\r\n        if (jsonMatch) {\r\n          parsedResponse = JSON.parse(jsonMatch[0]);\r\n        } else {\r\n          throw new Error('No JSON found in response');\r\n        }\r\n      } catch (e) {\r\n        // If not JSON, treat as plain text improvement\r\n        parsedResponse = {\r\n          title: title,\r\n          content: aiResponse\r\n        };\r\n      }\r\n\r\n      // Update the form fields with AI suggestions\r\n      if (parsedResponse.title) {\r\n        setTitle(parsedResponse.title);\r\n      }\r\n\r\n      if (parsedResponse.content) {\r\n        const quill = quillRef.current.getEditor();\r\n        quill.clipboard.dangerouslyPasteHTML(parsedResponse.content);\r\n      }\r\n\r\n      alert('AI improvements applied! Review and save changes.');\r\n\r\n    } catch (error) {\r\n      console.error('Error handling AI response:', error);\r\n      alert('Error processing AI response. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleContentChange = (content, delta, source, editor) => {\r\n    setContent(content);\r\n    setDelta(editor.getContents());\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Escape') {\r\n      onClose();\r\n    } else if (e.ctrlKey && e.key === 'Enter') {\r\n      handleSave();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal show\" onKeyDown={handleKeyDown}>\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h3>{isNewCard ? 'Add New Card' : 'Edit Card'}</h3>\r\n          <button className=\"close-btn\" onClick={onClose} aria-label=\"Close\">\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path d=\"M18 6L6 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n              <path d=\"M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"modal-body\">\r\n          <div className=\"editor-container\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"card-title-input\"\r\n              placeholder=\"Enter section title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n            />\r\n            \r\n            <ReactQuill\r\n              ref={quillRef}\r\n              theme=\"snow\"\r\n              value={content}\r\n              onChange={handleContentChange}\r\n              modules={modules}\r\n              formats={formats}\r\n              className=\"card-editor\"\r\n              placeholder=\"Enter your content here...\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"ai-prompt-section\">\r\n            <div className=\"prompt-container\">\r\n              <textarea\r\n                className=\"ai-prompt-input\"\r\n                placeholder=\"Write prompt for AI assistance...\"\r\n                value={aiPrompt}\r\n                onChange={(e) => setAiPrompt(e.target.value)}\r\n                rows=\"2\"\r\n              />\r\n              <button\r\n                className=\"ai-submit-btn\"\r\n                onClick={handleAiPromptSubmit}\r\n                disabled={isAiProcessing}\r\n                aria-label=\"Send to AI\"\r\n              >\r\n                {isAiProcessing ? (\r\n                  <div className=\"spinner\"></div>\r\n                ) : (\r\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M12 19L19 12M19 12L12 5M19 12H5\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"modal-footer\">\r\n          <button className=\"btn btn-secondary\" onClick={onClose}>\r\n            Cancel\r\n          </button>\r\n          <button className=\"btn btn-primary\" onClick={handleSave}>\r\n            Save Changes\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardEditorModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}