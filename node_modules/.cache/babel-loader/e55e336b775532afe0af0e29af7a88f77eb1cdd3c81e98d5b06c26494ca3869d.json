{"ast":null,"code":"/**\r\n * ArticleManager - Manages storage and retrieval of multiple articles in LocalStorage.\r\n * Replaces the single-article storage model.\r\n */\n\nconst STORAGE_KEY = 'articles_library';\nconst CURRENT_ARTICLE_KEY = 'current_article_id';\nexport const ArticleManager = {\n  /**\r\n   * Generates a unique ID for a new article\r\n   */\n  generateId: () => {\n    return 'article_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n  },\n  /**\r\n   * Saves an article to the library\r\n   * @param {string} id - Unique article ID\r\n   * @param {object} data - Article data (title, cards, etc.)\r\n   */\n  saveArticle: (id, data) => {\n    try {\n      const library = ArticleManager.getLibrary();\n      library[id] = {\n        ...data,\n        lastModified: new Date().toISOString(),\n        id: id\n      };\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(library));\n      return true;\n    } catch (error) {\n      console.error('Error saving article:', error);\n      return false;\n    }\n  },\n  /**\r\n   * Retrieves an article by ID\r\n   * @param {string} id - Article ID\r\n   * @returns {object|null} - Article data or null if not found\r\n   */\n  getArticle: id => {\n    const library = ArticleManager.getLibrary();\n    return library[id] || null;\n  },\n  /**\r\n   * Gets the entire library of articles\r\n   * @returns {object} - Dictionary of articles\r\n   */\n  getLibrary: () => {\n    try {\n      const data = localStorage.getItem(STORAGE_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading library:', error);\n      return {};\n    }\n  },\n  /**\r\n   * Creates a new empty article\r\n   * @param {string} title - Optional initial title\r\n   * @returns {string} - The new article ID\r\n   */\n  createArticle: (title = 'Untitled Article') => {\n    const id = ArticleManager.generateId();\n    const newArticle = {\n      id,\n      title,\n      cards: [],\n      created: new Date().toISOString(),\n      lastModified: new Date().toISOString()\n    };\n    ArticleManager.saveArticle(id, newArticle);\n    return id;\n  },\n  /**\r\n   * Deletes an article\r\n   * @param {string} id \r\n   */\n  deleteArticle: id => {\n    const library = ArticleManager.getLibrary();\n    if (library[id]) {\n      delete library[id];\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(library));\n    }\n  },\n  /**\r\n   * Migrates old single-article data to the new library format if it exists\r\n   */\n  migrateOldData: () => {\n    const oldData = localStorage.getItem('cardEditorData');\n    const oldTitle = localStorage.getItem('articleTitle');\n    if (oldData) {\n      try {\n        const parsedData = JSON.parse(oldData);\n        // Create a new ID for this legacy article\n        const id = 'legacy_' + Date.now();\n\n        // Convert old cards object format to array if needed, or just store as is\n        // The App.js expects cards as an array of objects {id, content}\n        // Old save format was: cardsData[card.id] = card.content\n\n        const cardsArray = Object.entries(parsedData).map(([cardId, content]) => ({\n          id: cardId,\n          content\n        }));\n        const articleData = {\n          id,\n          title: oldTitle || 'Migrated Article',\n          cards: cardsArray,\n          migrated: true\n        };\n        ArticleManager.saveArticle(id, articleData);\n\n        // Clear old data to prevent re-migration\n        localStorage.removeItem('cardEditorData');\n        localStorage.removeItem('articleTitle');\n        return id;\n      } catch (e) {\n        console.error('Migration failed:', e);\n      }\n    }\n    return null;\n  }\n};\nexport default ArticleManager;","map":{"version":3,"names":["STORAGE_KEY","CURRENT_ARTICLE_KEY","ArticleManager","generateId","Date","now","Math","random","toString","substr","saveArticle","id","data","library","getLibrary","lastModified","toISOString","localStorage","setItem","JSON","stringify","error","console","getArticle","getItem","parse","createArticle","title","newArticle","cards","created","deleteArticle","migrateOldData","oldData","oldTitle","parsedData","cardsArray","Object","entries","map","cardId","content","articleData","migrated","removeItem","e"],"sources":["D:/SRC/XAMPP/htdocs/sites/UI/article-page-v08/src/utils/ArticleManager.js"],"sourcesContent":["/**\r\n * ArticleManager - Manages storage and retrieval of multiple articles in LocalStorage.\r\n * Replaces the single-article storage model.\r\n */\r\n\r\nconst STORAGE_KEY = 'articles_library';\r\nconst CURRENT_ARTICLE_KEY = 'current_article_id';\r\n\r\nexport const ArticleManager = {\r\n    /**\r\n     * Generates a unique ID for a new article\r\n     */\r\n    generateId: () => {\r\n        return 'article_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n    },\r\n\r\n    /**\r\n     * Saves an article to the library\r\n     * @param {string} id - Unique article ID\r\n     * @param {object} data - Article data (title, cards, etc.)\r\n     */\r\n    saveArticle: (id, data) => {\r\n        try {\r\n            const library = ArticleManager.getLibrary();\r\n            library[id] = {\r\n                ...data,\r\n                lastModified: new Date().toISOString(),\r\n                id: id\r\n            };\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(library));\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error saving article:', error);\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Retrieves an article by ID\r\n     * @param {string} id - Article ID\r\n     * @returns {object|null} - Article data or null if not found\r\n     */\r\n    getArticle: (id) => {\r\n        const library = ArticleManager.getLibrary();\r\n        return library[id] || null;\r\n    },\r\n\r\n    /**\r\n     * Gets the entire library of articles\r\n     * @returns {object} - Dictionary of articles\r\n     */\r\n    getLibrary: () => {\r\n        try {\r\n            const data = localStorage.getItem(STORAGE_KEY);\r\n            return data ? JSON.parse(data) : {};\r\n        } catch (error) {\r\n            console.error('Error loading library:', error);\r\n            return {};\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Creates a new empty article\r\n     * @param {string} title - Optional initial title\r\n     * @returns {string} - The new article ID\r\n     */\r\n    createArticle: (title = 'Untitled Article') => {\r\n        const id = ArticleManager.generateId();\r\n        const newArticle = {\r\n            id,\r\n            title,\r\n            cards: [],\r\n            created: new Date().toISOString(),\r\n            lastModified: new Date().toISOString()\r\n        };\r\n        ArticleManager.saveArticle(id, newArticle);\r\n        return id;\r\n    },\r\n\r\n    /**\r\n     * Deletes an article\r\n     * @param {string} id \r\n     */\r\n    deleteArticle: (id) => {\r\n        const library = ArticleManager.getLibrary();\r\n        if (library[id]) {\r\n            delete library[id];\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(library));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Migrates old single-article data to the new library format if it exists\r\n     */\r\n    migrateOldData: () => {\r\n        const oldData = localStorage.getItem('cardEditorData');\r\n        const oldTitle = localStorage.getItem('articleTitle');\r\n\r\n        if (oldData) {\r\n            try {\r\n                const parsedData = JSON.parse(oldData);\r\n                // Create a new ID for this legacy article\r\n                const id = 'legacy_' + Date.now();\r\n\r\n                // Convert old cards object format to array if needed, or just store as is\r\n                // The App.js expects cards as an array of objects {id, content}\r\n                // Old save format was: cardsData[card.id] = card.content\r\n\r\n                const cardsArray = Object.entries(parsedData).map(([cardId, content]) => ({\r\n                    id: cardId,\r\n                    content\r\n                }));\r\n\r\n                const articleData = {\r\n                    id,\r\n                    title: oldTitle || 'Migrated Article',\r\n                    cards: cardsArray,\r\n                    migrated: true\r\n                };\r\n\r\n                ArticleManager.saveArticle(id, articleData);\r\n\r\n                // Clear old data to prevent re-migration\r\n                localStorage.removeItem('cardEditorData');\r\n                localStorage.removeItem('articleTitle');\r\n\r\n                return id;\r\n            } catch (e) {\r\n                console.error('Migration failed:', e);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n};\r\n\r\nexport default ArticleManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}