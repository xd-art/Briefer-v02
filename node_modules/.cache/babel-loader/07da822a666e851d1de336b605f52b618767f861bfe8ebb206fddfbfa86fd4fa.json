{"ast":null,"code":"import _objectSpread from\"D:/SRC/XAMPP/htdocs/sites/UI/article-page-v08/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{optimizedLocalStorage}from'./performance';const STORAGE_KEY='articles_library';const CURRENT_ARTICLE_ID_KEY='current_article_id';// Legacy keys for migration\nconst LEGACY_DATA_KEY='cardEditorData';const LEGACY_TITLE_KEY='articleTitle';export const ArticleManager={/**\r\n     * Get all articles from storage\r\n     * @returns {Object} Map of article objects keyed by ID\r\n     */getAllArticles:()=>{return optimizedLocalStorage.getItem(STORAGE_KEY)||{};},/**\r\n     * Get a specific article by ID\r\n     * @param {string} id - The article ID\r\n     * @returns {Object|null} The article data or null if not found\r\n     */getArticle:id=>{const articles=ArticleManager.getAllArticles();return articles[id]||null;},/**\r\n     * Save an article\r\n     * @param {string} id - The article ID\r\n     * @param {Object} data - The article data (title, cards, etc.)\r\n     * @returns {boolean} Success status\r\n     */saveArticle:(id,data)=>{const articles=ArticleManager.getAllArticles();articles[id]=_objectSpread(_objectSpread(_objectSpread({},articles[id]),data),{},{lastModified:new Date().toISOString()});return optimizedLocalStorage.setItem(STORAGE_KEY,articles);},/**\r\n     * Create a new article\r\n     * @param {string} topic - The topic of the article\r\n     * @param {string} template - The template type (guide, faq, etc.)\r\n     * @returns {string} The new article ID\r\n     */createArticle:function(){let topic=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'Untitled';let template=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'guide';const id='article_'+Date.now()+'_'+Math.random().toString(36).substr(2,9);const newArticle={id,title:topic,cards:[],// Initial empty cards\ntemplate,created:new Date().toISOString(),lastModified:new Date().toISOString()};ArticleManager.saveArticle(id,newArticle);return id;},/**\r\n     * Delete an article\r\n     * @param {string} id - The article ID\r\n     */deleteArticle:id=>{const articles=ArticleManager.getAllArticles();if(articles[id]){delete articles[id];optimizedLocalStorage.setItem(STORAGE_KEY,articles);}},/**\r\n     * Set the current active article ID\r\n     * @param {string} id - The article ID\r\n     */setCurrentArticleId:id=>{optimizedLocalStorage.setItem(CURRENT_ARTICLE_ID_KEY,id);},/**\r\n     * Get the current active article ID\r\n     * @returns {string|null} The current article ID\r\n     */getCurrentArticleId:()=>{return optimizedLocalStorage.getItem(CURRENT_ARTICLE_ID_KEY);},/**\r\n     * Migrate legacy single-article data to the new library format\r\n     * @returns {string|null} The ID of the migrated article, or null if no migration needed\r\n     */migrateOldData:()=>{const articles=ArticleManager.getAllArticles();// If library is not empty, assume migration already happened or isn't needed\nif(Object.keys(articles).length>0){return null;}const legacyData=optimizedLocalStorage.getItem(LEGACY_DATA_KEY);const legacyTitle=optimizedLocalStorage.getItem(LEGACY_TITLE_KEY);if(legacyData){// Create a new article from legacy data\nconst id='article_migrated_'+Date.now();// Convert legacy object format to array format if needed, \n// but App.js seems to handle the conversion. \n// We will store it as is, and let App.js handle the structure for now, \n// or better, standardize it here.\n// App.js expects: cards array. \n// Legacy storage was: { id: content } map.\nlet cardsArray=[];if(legacyData&&typeof legacyData==='object'){cardsArray=Object.entries(legacyData).map(_ref=>{let[cardId,content]=_ref;return{id:cardId,content};});}const migratedArticle={id,title:legacyTitle||'Untitled Article (Restored)',cards:cardsArray,template:'guide',created:new Date().toISOString(),lastModified:new Date().toISOString()};ArticleManager.saveArticle(id,migratedArticle);// Optional: Clear legacy data to avoid confusion? \n// Let's keep it for safety for now, or maybe clear it to force usage of new system.\n// optimizedLocalStorage.removeItem(LEGACY_DATA_KEY);\n// optimizedLocalStorage.removeItem(LEGACY_TITLE_KEY);\nreturn id;}return null;}};","map":{"version":3,"names":["optimizedLocalStorage","STORAGE_KEY","CURRENT_ARTICLE_ID_KEY","LEGACY_DATA_KEY","LEGACY_TITLE_KEY","ArticleManager","getAllArticles","getItem","getArticle","id","articles","saveArticle","data","_objectSpread","lastModified","Date","toISOString","setItem","createArticle","topic","arguments","length","undefined","template","now","Math","random","toString","substr","newArticle","title","cards","created","deleteArticle","setCurrentArticleId","getCurrentArticleId","migrateOldData","Object","keys","legacyData","legacyTitle","cardsArray","entries","map","_ref","cardId","content","migratedArticle"],"sources":["D:/SRC/XAMPP/htdocs/sites/UI/article-page-v08/src/utils/ArticleManager.js"],"sourcesContent":["import { optimizedLocalStorage } from './performance';\r\n\r\nconst STORAGE_KEY = 'articles_library';\r\nconst CURRENT_ARTICLE_ID_KEY = 'current_article_id';\r\n\r\n// Legacy keys for migration\r\nconst LEGACY_DATA_KEY = 'cardEditorData';\r\nconst LEGACY_TITLE_KEY = 'articleTitle';\r\n\r\nexport const ArticleManager = {\r\n    /**\r\n     * Get all articles from storage\r\n     * @returns {Object} Map of article objects keyed by ID\r\n     */\r\n    getAllArticles: () => {\r\n        return optimizedLocalStorage.getItem(STORAGE_KEY) || {};\r\n    },\r\n\r\n    /**\r\n     * Get a specific article by ID\r\n     * @param {string} id - The article ID\r\n     * @returns {Object|null} The article data or null if not found\r\n     */\r\n    getArticle: (id) => {\r\n        const articles = ArticleManager.getAllArticles();\r\n        return articles[id] || null;\r\n    },\r\n\r\n    /**\r\n     * Save an article\r\n     * @param {string} id - The article ID\r\n     * @param {Object} data - The article data (title, cards, etc.)\r\n     * @returns {boolean} Success status\r\n     */\r\n    saveArticle: (id, data) => {\r\n        const articles = ArticleManager.getAllArticles();\r\n\r\n        articles[id] = {\r\n            ...articles[id],\r\n            ...data,\r\n            lastModified: new Date().toISOString()\r\n        };\r\n\r\n        return optimizedLocalStorage.setItem(STORAGE_KEY, articles);\r\n    },\r\n\r\n    /**\r\n     * Create a new article\r\n     * @param {string} topic - The topic of the article\r\n     * @param {string} template - The template type (guide, faq, etc.)\r\n     * @returns {string} The new article ID\r\n     */\r\n    createArticle: (topic = 'Untitled', template = 'guide') => {\r\n        const id = 'article_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n        const newArticle = {\r\n            id,\r\n            title: topic,\r\n            cards: [], // Initial empty cards\r\n            template,\r\n            created: new Date().toISOString(),\r\n            lastModified: new Date().toISOString()\r\n        };\r\n\r\n        ArticleManager.saveArticle(id, newArticle);\r\n        return id;\r\n    },\r\n\r\n    /**\r\n     * Delete an article\r\n     * @param {string} id - The article ID\r\n     */\r\n    deleteArticle: (id) => {\r\n        const articles = ArticleManager.getAllArticles();\r\n        if (articles[id]) {\r\n            delete articles[id];\r\n            optimizedLocalStorage.setItem(STORAGE_KEY, articles);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set the current active article ID\r\n     * @param {string} id - The article ID\r\n     */\r\n    setCurrentArticleId: (id) => {\r\n        optimizedLocalStorage.setItem(CURRENT_ARTICLE_ID_KEY, id);\r\n    },\r\n\r\n    /**\r\n     * Get the current active article ID\r\n     * @returns {string|null} The current article ID\r\n     */\r\n    getCurrentArticleId: () => {\r\n        return optimizedLocalStorage.getItem(CURRENT_ARTICLE_ID_KEY);\r\n    },\r\n\r\n    /**\r\n     * Migrate legacy single-article data to the new library format\r\n     * @returns {string|null} The ID of the migrated article, or null if no migration needed\r\n     */\r\n    migrateOldData: () => {\r\n        const articles = ArticleManager.getAllArticles();\r\n\r\n        // If library is not empty, assume migration already happened or isn't needed\r\n        if (Object.keys(articles).length > 0) {\r\n            return null;\r\n        }\r\n\r\n        const legacyData = optimizedLocalStorage.getItem(LEGACY_DATA_KEY);\r\n        const legacyTitle = optimizedLocalStorage.getItem(LEGACY_TITLE_KEY);\r\n\r\n        if (legacyData) {\r\n            // Create a new article from legacy data\r\n            const id = 'article_migrated_' + Date.now();\r\n\r\n            // Convert legacy object format to array format if needed, \r\n            // but App.js seems to handle the conversion. \r\n            // We will store it as is, and let App.js handle the structure for now, \r\n            // or better, standardize it here.\r\n            // App.js expects: cards array. \r\n            // Legacy storage was: { id: content } map.\r\n\r\n            let cardsArray = [];\r\n            if (legacyData && typeof legacyData === 'object') {\r\n                cardsArray = Object.entries(legacyData).map(([cardId, content]) => ({\r\n                    id: cardId,\r\n                    content\r\n                }));\r\n            }\r\n\r\n            const migratedArticle = {\r\n                id,\r\n                title: legacyTitle || 'Untitled Article (Restored)',\r\n                cards: cardsArray,\r\n                template: 'guide',\r\n                created: new Date().toISOString(),\r\n                lastModified: new Date().toISOString()\r\n            };\r\n\r\n            ArticleManager.saveArticle(id, migratedArticle);\r\n\r\n            // Optional: Clear legacy data to avoid confusion? \r\n            // Let's keep it for safety for now, or maybe clear it to force usage of new system.\r\n            // optimizedLocalStorage.removeItem(LEGACY_DATA_KEY);\r\n            // optimizedLocalStorage.removeItem(LEGACY_TITLE_KEY);\r\n\r\n            return id;\r\n        }\r\n\r\n        return null;\r\n    }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}