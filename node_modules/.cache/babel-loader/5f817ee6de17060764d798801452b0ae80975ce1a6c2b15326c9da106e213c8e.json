{"ast":null,"code":"/**\r\n * Article Manager - Manages multiple articles in LocalStorage\r\n * Replaces single-article storage with a library of articles\r\n */\n\nconst STORAGE_KEY = 'articles_library';\nconst OLD_DATA_KEY = 'cardEditorData';\nconst OLD_TITLE_KEY = 'articleTitle';\n\n/**\r\n * Generate unique article ID\r\n */\nfunction generateId() {\n  return 'article_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n}\n\n/**\r\n * Get all articles from storage\r\n */\nexport function getAllArticles() {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY);\n    return data ? JSON.parse(data) : {};\n  } catch (error) {\n    console.error('Error reading articles:', error);\n    return {};\n  }\n}\n\n/**\r\n * Get specific article by ID\r\n */\nexport function getArticle(id) {\n  const articles = getAllArticles();\n  return articles[id] || null;\n}\n\n/**\r\n * Save article data\r\n */\nexport function saveArticle(id, articleData) {\n  try {\n    const articles = getAllArticles();\n    articles[id] = {\n      ...articleData,\n      updatedAt: new Date().toISOString()\n    };\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(articles));\n    return true;\n  } catch (error) {\n    console.error('Error saving article:', error);\n    return false;\n  }\n}\n\n/**\r\n * Create new article\r\n */\nexport function createArticle(topic = 'Untitled Article') {\n  const id = generateId();\n  const articleData = {\n    id,\n    title: topic,\n    cards: {},\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString()\n  };\n  saveArticle(id, articleData);\n  return id;\n}\n\n/**\r\n * Delete article\r\n */\nexport function deleteArticle(id) {\n  try {\n    const articles = getAllArticles();\n    delete articles[id];\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(articles));\n    return true;\n  } catch (error) {\n    console.error('Error deleting article:', error);\n    return false;\n  }\n}\n\n/**\r\n * Migrate old single-article data to new format\r\n */\nexport function migrateOldData() {\n  try {\n    // Check if old data exists\n    const oldData = localStorage.getItem(OLD_DATA_KEY);\n    const oldTitle = localStorage.getItem(OLD_TITLE_KEY);\n    if (!oldData) {\n      return null; // No old data to migrate\n    }\n\n    // Check if already migrated\n    const articles = getAllArticles();\n    if (Object.keys(articles).length > 0) {\n      return null; // Already have new format data\n    }\n\n    // Create new article from old data\n    const id = createArticle(oldTitle || 'Migrated Article');\n    const parsedOldData = JSON.parse(oldData);\n    saveArticle(id, {\n      id,\n      title: oldTitle || 'Migrated Article',\n      cards: parsedOldData,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    });\n    console.log('✅ Old data migrated to article:', id);\n    return id;\n  } catch (error) {\n    console.error('Error migrating old data:', error);\n    return null;\n  }\n}\nexport default {\n  getAllArticles,\n  getArticle,\n  saveArticle,\n  createArticle,\n  deleteArticle,\n  migrateOldData\n};","map":{"version":3,"names":["STORAGE_KEY","OLD_DATA_KEY","OLD_TITLE_KEY","generateId","Date","now","Math","random","toString","substr","getAllArticles","data","localStorage","getItem","JSON","parse","error","console","getArticle","id","articles","saveArticle","articleData","updatedAt","toISOString","setItem","stringify","createArticle","topic","title","cards","createdAt","deleteArticle","migrateOldData","oldData","oldTitle","Object","keys","length","parsedOldData","log"],"sources":["D:/SRC/XAMPP/htdocs/sites/UI/article-page-v08/src/utils/ArticleManager.js"],"sourcesContent":["/**\r\n * Article Manager - Manages multiple articles in LocalStorage\r\n * Replaces single-article storage with a library of articles\r\n */\r\n\r\nconst STORAGE_KEY = 'articles_library';\r\nconst OLD_DATA_KEY = 'cardEditorData';\r\nconst OLD_TITLE_KEY = 'articleTitle';\r\n\r\n/**\r\n * Generate unique article ID\r\n */\r\nfunction generateId() {\r\n    return 'article_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\n/**\r\n * Get all articles from storage\r\n */\r\nexport function getAllArticles() {\r\n    try {\r\n        const data = localStorage.getItem(STORAGE_KEY);\r\n        return data ? JSON.parse(data) : {};\r\n    } catch (error) {\r\n        console.error('Error reading articles:', error);\r\n        return {};\r\n    }\r\n}\r\n\r\n/**\r\n * Get specific article by ID\r\n */\r\nexport function getArticle(id) {\r\n    const articles = getAllArticles();\r\n    return articles[id] || null;\r\n}\r\n\r\n/**\r\n * Save article data\r\n */\r\nexport function saveArticle(id, articleData) {\r\n    try {\r\n        const articles = getAllArticles();\r\n        articles[id] = {\r\n            ...articleData,\r\n            updatedAt: new Date().toISOString()\r\n        };\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(articles));\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error saving article:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Create new article\r\n */\r\nexport function createArticle(topic = 'Untitled Article') {\r\n    const id = generateId();\r\n    const articleData = {\r\n        id,\r\n        title: topic,\r\n        cards: {},\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString()\r\n    };\r\n\r\n    saveArticle(id, articleData);\r\n    return id;\r\n}\r\n\r\n/**\r\n * Delete article\r\n */\r\nexport function deleteArticle(id) {\r\n    try {\r\n        const articles = getAllArticles();\r\n        delete articles[id];\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(articles));\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error deleting article:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * Migrate old single-article data to new format\r\n */\r\nexport function migrateOldData() {\r\n    try {\r\n        // Check if old data exists\r\n        const oldData = localStorage.getItem(OLD_DATA_KEY);\r\n        const oldTitle = localStorage.getItem(OLD_TITLE_KEY);\r\n\r\n        if (!oldData) {\r\n            return null; // No old data to migrate\r\n        }\r\n\r\n        // Check if already migrated\r\n        const articles = getAllArticles();\r\n        if (Object.keys(articles).length > 0) {\r\n            return null; // Already have new format data\r\n        }\r\n\r\n        // Create new article from old data\r\n        const id = createArticle(oldTitle || 'Migrated Article');\r\n        const parsedOldData = JSON.parse(oldData);\r\n\r\n        saveArticle(id, {\r\n            id,\r\n            title: oldTitle || 'Migrated Article',\r\n            cards: parsedOldData,\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString()\r\n        });\r\n\r\n        console.log('✅ Old data migrated to article:', id);\r\n        return id;\r\n    } catch (error) {\r\n        console.error('Error migrating old data:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default {\r\n    getAllArticles,\r\n    getArticle,\r\n    saveArticle,\r\n    createArticle,\r\n    deleteArticle,\r\n    migrateOldData\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}