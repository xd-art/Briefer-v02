{"ast":null,"code":"/**\r\n * Tries to repair a truncated JSON string by closing open brackets and braces.\r\n * @param {string} jsonString - The potentially truncated JSON string.\r\n * @return {string} - The repaired JSON string.\r\n */\nexport function jsonRepair(jsonString) {\n  let repaired = jsonString.trim();\n\n  // Basic cleanup: remove trailing commas before closing brackets\n  // This is a simple heuristic and might not catch all cases\n\n  const stack = [];\n  let inString = false;\n  let isEscaped = false;\n  for (let i = 0; i < repaired.length; i++) {\n    const char = repaired[i];\n    if (isEscaped) {\n      isEscaped = false;\n      continue;\n    }\n    if (char === '\\\\') {\n      isEscaped = true;\n      continue;\n    }\n    if (char === '\"') {\n      inString = !inString;\n      continue;\n    }\n    if (!inString) {\n      if (char === '{' || char === '[') {\n        stack.push(char);\n      } else if (char === '}') {\n        if (stack.length > 0 && stack[stack.length - 1] === '{') {\n          stack.pop();\n        }\n      } else if (char === ']') {\n        if (stack.length > 0 && stack[stack.length - 1] === '[') {\n          stack.pop();\n        }\n      }\n    }\n  }\n\n  // If we are still in a string, close it\n  if (inString) {\n    repaired += '\"';\n  }\n\n  // Close remaining open structures in reverse order\n  while (stack.length > 0) {\n    const open = stack.pop();\n    if (open === '{') {\n      repaired += '}';\n    } else if (open === '[') {\n      repaired += ']';\n    }\n  }\n  return repaired;\n}","map":{"version":3,"names":["jsonRepair","jsonString","repaired","trim","stack","inString","isEscaped","i","length","char","push","pop","open"],"sources":["D:/SRC/XAMPP/htdocs/sites/UI/article-page-v08/src/utils/jsonRepair.js"],"sourcesContent":["/**\r\n * Tries to repair a truncated JSON string by closing open brackets and braces.\r\n * @param {string} jsonString - The potentially truncated JSON string.\r\n * @return {string} - The repaired JSON string.\r\n */\r\nexport function jsonRepair(jsonString) {\r\n    let repaired = jsonString.trim();\r\n\r\n    // Basic cleanup: remove trailing commas before closing brackets\r\n    // This is a simple heuristic and might not catch all cases\r\n\r\n    const stack = [];\r\n    let inString = false;\r\n    let isEscaped = false;\r\n\r\n    for (let i = 0; i < repaired.length; i++) {\r\n        const char = repaired[i];\r\n\r\n        if (isEscaped) {\r\n            isEscaped = false;\r\n            continue;\r\n        }\r\n\r\n        if (char === '\\\\') {\r\n            isEscaped = true;\r\n            continue;\r\n        }\r\n\r\n        if (char === '\"') {\r\n            inString = !inString;\r\n            continue;\r\n        }\r\n\r\n        if (!inString) {\r\n            if (char === '{' || char === '[') {\r\n                stack.push(char);\r\n            } else if (char === '}') {\r\n                if (stack.length > 0 && stack[stack.length - 1] === '{') {\r\n                    stack.pop();\r\n                }\r\n            } else if (char === ']') {\r\n                if (stack.length > 0 && stack[stack.length - 1] === '[') {\r\n                    stack.pop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // If we are still in a string, close it\r\n    if (inString) {\r\n        repaired += '\"';\r\n    }\r\n\r\n    // Close remaining open structures in reverse order\r\n    while (stack.length > 0) {\r\n        const open = stack.pop();\r\n        if (open === '{') {\r\n            repaired += '}';\r\n        } else if (open === '[') {\r\n            repaired += ']';\r\n        }\r\n    }\r\n\r\n    return repaired;\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,UAAUA,CAACC,UAAU,EAAE;EACnC,IAAIC,QAAQ,GAAGD,UAAU,CAACE,IAAI,CAAC,CAAC;;EAEhC;EACA;;EAEA,MAAMC,KAAK,GAAG,EAAE;EAChB,IAAIC,QAAQ,GAAG,KAAK;EACpB,IAAIC,SAAS,GAAG,KAAK;EAErB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,QAAQ,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;IACtC,MAAME,IAAI,GAAGP,QAAQ,CAACK,CAAC,CAAC;IAExB,IAAID,SAAS,EAAE;MACXA,SAAS,GAAG,KAAK;MACjB;IACJ;IAEA,IAAIG,IAAI,KAAK,IAAI,EAAE;MACfH,SAAS,GAAG,IAAI;MAChB;IACJ;IAEA,IAAIG,IAAI,KAAK,GAAG,EAAE;MACdJ,QAAQ,GAAG,CAACA,QAAQ;MACpB;IACJ;IAEA,IAAI,CAACA,QAAQ,EAAE;MACX,IAAII,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,GAAG,EAAE;QAC9BL,KAAK,CAACM,IAAI,CAACD,IAAI,CAAC;MACpB,CAAC,MAAM,IAAIA,IAAI,KAAK,GAAG,EAAE;QACrB,IAAIL,KAAK,CAACI,MAAM,GAAG,CAAC,IAAIJ,KAAK,CAACA,KAAK,CAACI,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;UACrDJ,KAAK,CAACO,GAAG,CAAC,CAAC;QACf;MACJ,CAAC,MAAM,IAAIF,IAAI,KAAK,GAAG,EAAE;QACrB,IAAIL,KAAK,CAACI,MAAM,GAAG,CAAC,IAAIJ,KAAK,CAACA,KAAK,CAACI,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;UACrDJ,KAAK,CAACO,GAAG,CAAC,CAAC;QACf;MACJ;IACJ;EACJ;;EAEA;EACA,IAAIN,QAAQ,EAAE;IACVH,QAAQ,IAAI,GAAG;EACnB;;EAEA;EACA,OAAOE,KAAK,CAACI,MAAM,GAAG,CAAC,EAAE;IACrB,MAAMI,IAAI,GAAGR,KAAK,CAACO,GAAG,CAAC,CAAC;IACxB,IAAIC,IAAI,KAAK,GAAG,EAAE;MACdV,QAAQ,IAAI,GAAG;IACnB,CAAC,MAAM,IAAIU,IAAI,KAAK,GAAG,EAAE;MACrBV,QAAQ,IAAI,GAAG;IACnB;EACJ;EAEA,OAAOA,QAAQ;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}